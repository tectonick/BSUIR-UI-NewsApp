(()=>{function e(d){void 0===e.displayed&&(e.displayed=0);let l=e.displayed,o=e.displayed+d,a=document.querySelector("main");for(let d=l;d<o;d++){let l=document.createElement("section");if(n.articles.length<=d)return l.innerText="No news for today",document.getElementById("more-button").style.display="none",void a.appendChild(l);l.classList.add("news-item");let o=n.articles[d],i=document.createElement("h2");i.innerText=o.title;let s=document.createElement("em");s.innerText="Источник: "+o.source.name;let c=document.createElement("img");c.src=o.urlToImage;let m=document.createElement("p");m.innerText=o.description;let r=document.createElement("a");r.innerText="Подробнее в источнике",r.href=o.url,l.appendChild(c),l.appendChild(i),l.appendChild(s),l.appendChild(m),l.appendChild(r),a.appendChild(l),e.displayed++,t(o.source.name)}document.getElementById("not-found").style.display="none"}function t(e){if(void 0===t.sources&&(t.sources=[]),t.sources.indexOf(e)<0){t.sources.push(e);let n=document.createElement("option");n.innerHTML=e,n.value=e,document.getElementById("filter").appendChild(n)}}var n;document.getElementById("more-button").addEventListener("click",(t=>{t.preventDefault(),e(5)})),document.getElementById("search-btn").addEventListener("click",(()=>{let e=document.getElementById("search").value,t=document.getElementsByClassName("news-item"),n=!1;for(let d=0;d<t.length;d++)t[d].innerHTML.indexOf(e)<0?t[d].style.display="none":(t[d].style.display="block",n=!0);document.getElementById("not-found").style.display=n?"none":"block"})),document.getElementById("search").addEventListener("keyup",(function(e){13===e.keyCode&&(e.preventDefault(),document.getElementById("search-btn").click())})),document.getElementById("filter").addEventListener("change",(e=>{let t=e.target.value,n=document.getElementsByClassName("news-item");for(let e=0;e<n.length;e++)"Все источники"!=t&&n[e].getElementsByTagName("em")[0].innerHTML.indexOf(t)<0?n[e].style.display="none":n[e].style.display="block";document.getElementById("not-found").style.display="none"})),async function(){n=await async function(){return await fetch("https://newsapi.org/v2/top-headlines?country=ru&apiKey=1b492488a06f476880d9b54d4e64fbbb",{mode:"cors"}).then((e=>e.json()))}(),t("Все источники"),console.log(n),e(5)}()})();